<div id="factor-header">
  <button
    mat-icon-button
    *ngIf="canEdit$ | async"
    color="primary"
    (click)="onEditClicked()"
    id="edit-button"
  >
    <mat-icon>edit</mat-icon>
  </button>
  <h3 *ngIf="factor">{{ factor.name }}</h3>
</div>

<div *ngIf="factor && factor.measures?.length > 0" class="measures">
  <div
    *ngFor="let measure of factor.measures; let i = index"
    class="measure"
  >
    <ng-container *ngIf="canEdit$ | async">
      <button
        mat-icon-button
        matTooltipShowDelay="0"
        matTooltip="{{
          'success-factor.remove-measure-tooltip' | translate
        }}"
        (click)="openRemoveMeasureDialog(i)"
      >
        <mat-icon color="warn">remove_circle_outline</mat-icon>
      </button>
    </ng-container>
    <app-success-measure
      [measureName]="measures[measure]?.name"
      [dimensionName]="this.dimensionName"
      (measureChange)="this.measuresChange.emit(measures)"
      [service]="service"
    ></app-success-measure>
  </div>
</div>
<div *ngIf="canEdit$ | async as editMode">
  <button
    id="add-measure-button"
    mat-raised-button
    mat-button
    color="primary"
    (click)="openPickMeasureDialog()"
  >
    {{ 'success-factor.add-measure-button' | translate }}
  </button>
  <div *ngIf="!editMode && factor && factor.measures.length === 0">
    {{ 'success-factor.no-measures-placeholder' | translate }}
  </div>
</div>
