<!-- Only show component if authorized. We are authorized if we are signed in or we have restricted access to the model -->
<ng-container
  *ngIf="(user$ | async)?.signedIn || restricted; else notAuthorized"
>
  <ng-container
    *ngIf="selectedGroup$ | async as group; else noGroupSelect"
  >
    <h2 *ngIf="group?.name">
      {{
        'success-modeling.community-workspace'
          | translate: { community: group.name }
      }}
    </h2>

    <!-- workspace management -->
    <app-workspace-management></app-workspace-management>

    <mat-tab-group mat-align-tabs="start">
      <mat-tab label="Success modeling">
        <!-- success model -->
        <app-success-model></app-success-model>
      </mat-tab>

      <mat-tab>
        <!-- requirements -->
        <ng-template mat-tab-label>
          <span
            [matBadge]="numberOfRequirements$ | async"
            matBadgeColor="accent"
            matBadgeOverlap="false"
            matTooltip="{{
              'success-modeling.reqbaz.tooltip' | translate
            }}"
            >Requirements and issues</span
          > </ng-template
        ><app-requirements></app-requirements>
      </mat-tab>
    </mat-tab-group>
  </ng-container>
</ng-container>

<ng-template #notAuthorized>
  <mat-card>
    {{ 'not-logged-in' | translate }}
  </mat-card>
</ng-template>

<ng-template #noGroupSelect>
  <mat-card>
    {{ 'success-modeling.no-group-selected' | translate }}
  </mat-card>
</ng-template>
