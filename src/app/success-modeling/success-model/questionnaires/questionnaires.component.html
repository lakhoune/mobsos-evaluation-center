<mat-card>
  <mat-card-header class="flex items-center">
    <mat-icon mat-card-avatar>question_answer</mat-icon>
    <mat-card-title>{{
      'success-modeling.questionnaires.title' | translate
    }}</mat-card-title>
    <mat-card-subtitle>{{
      'success-modeling.questionnaires.subtitle' | translate
    }}</mat-card-subtitle>

    <button
      *ngIf="canEdit$ | async"
      mat-icon-button
      class="ml-auto"
      matTooltipShowDelay="0"
      matTooltip="{{
        'success-modeling.questionnaires.add-questionnaire-tooltip'
          | translate
      }}"
      (click)="openPickSurveyDialog()"
    >
      <mat-icon
        color="primary"
        id="add-questionnaire-icon"
        class="text-2xl"
        >add</mat-icon
      >
    </button>
  </mat-card-header>
  <mat-card-content *ngIf="model$ | async as model">
    <p *ngIf="!model.surveys || model.surveys.length === 0">
      {{
        'success-modeling.questionnaires.no-questionnaires'
          | translate
      }}
      <ng-container *ngIf="!(editMode$ | async)">{{
        'success-modeling.questionnaires.activate-edit' | translate
      }}</ng-container>
    </p>

    <div
      *ngFor="let survey of model.surveys; let i = index"
      class="questionnaire-row"
    >
      <button
        *ngIf="canEdit$ | async"
        mat-icon-button
        matTooltip="{{
          'success-modeling.questionnaires.remove-questionnaire-tooltip'
            | translate
        }}"
        (click)="openRemoveQuestionnaireDialog(i)"
      >
        <mat-icon color="warn">remove_circle_outline</mat-icon>
      </button>

      <span class="font-bold">{{ survey.name }}</span>

      <button mat-icon-button (click)="openInfoDialog(survey)">
        <mat-icon id="info-icon"> info_outline </mat-icon>
      </button>

      <button
        mat-icon-button
        aria-label="Workspaces"
        (click)="shareSurveyLink(survey.id)"
        matTooltip="{{
          'success-modeling.questionnaires.share-survey' | translate
        }}"
      >
        <mat-icon color="primary"> share </mat-icon>
      </button>
      <a
        mat-icon-button
        [href]="mobsosSurveysUrl + '/surveys/' + survey.id"
        color="primary"
        target="_blank"
      >
        <mat-icon>open_in_browser</mat-icon>
      </a>
    </div>
  </mat-card-content>
</mat-card>
