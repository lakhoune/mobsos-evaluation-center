<mat-sidenav-container>
  <mat-sidenav #snav [mode]="mobileQuery.matches ? 'over' : 'side'"
               [fixedInViewport]="mobileQuery.matches">
    <mat-form-field id="community-selection">
      <mat-label>Community</mat-label>
      <mat-select [(value)]="selectedGroup" (selectionChange)="onGroupSelected($event.value)">
        <mat-option *ngFor="let group of groups" [value]="groupMap[group]">
          {{group}}
        </mat-option>
      </mat-select>
      <mat-hint [ngStyle]="signedIn ? {visibility: 'hidden'} : {}">
        {{'app.community-selector.select-community-hint'|translate}}
      </mat-hint>
    </mat-form-field>
    <mat-divider></mat-divider>
    <mat-nav-list>
      <a mat-list-item routerLink="/" routerLinkActive="active" (click)="snav.toggle()">
        <mat-icon matListIcon>list</mat-icon>
        {{'shared.pages.dashboard'|translate}}
      </a>
      <a mat-list-item routerLink="/success-modeling" routerLinkActive="active" (click)="snav.toggle()">
        <mat-icon matListIcon>trending_up</mat-icon>
        {{'shared.pages.success-modeling'|translate}}
      </a>
      <a mat-list-item routerLink="/raw-edit" routerLinkActive="active" [hidden]="!expertMode" (click)="snav.toggle()">
        <mat-icon matListIcon>code</mat-icon>
        {{'shared.pages.raw-edit'|translate}}
      </a>
    </mat-nav-list>
    <footer>
      <mat-slide-toggle labelPosition="before" [checked]="expertMode" (change)="setExpertMode($event.checked)">
        {{'app.expert-mode.switch-label'|translate}}
      </mat-slide-toggle>
      <mat-action-list>
        <button mat-list-item (click)="useLanguage('en')" [disabled]="languageService.getCurrentLanguage() == 'en'">
          English
        </button>
        <button mat-list-item (click)="useLanguage('de')" [disabled]="languageService.getCurrentLanguage() == 'de'">
          Deutsch
        </button>
      </mat-action-list>
    </footer>
  </mat-sidenav>
  <mat-sidenav-content>
    <las2peer-frontend-statusbar id="las2peer-statusbar" service="{{title}}"
                                 [attr.oidcAuthority]="environment.openIdAuthorityUrl"
                                 [attr.oidcclientid]="environment.openIdClientId"
                                 [attr.baseurl]="environment.las2peerWebConnectorUrl"
                                 oidcpopupsigninurl="oidc-signin"
                                 oidcpopupsignouturl="oidc-signout"
                                 oidcsilentsigninturl="oidc-silent"
                                 [attr.loggedIn]="user == null ? null : true "
                                 [attr.loginName]="user == null ? '' : user.profile.preferred_username"
                                 [attr.loginOidcToken]="user == null ? '' : user.access_token"
                                 [attr.loginOidcSub]="user == null ? '' : user.profile.sub"
                                 autoAppendWidget=true
                                 (signed-in)="setUser($event.detail)"
                                 (signed-out)="setUser(null)">
      <button mat-icon-button slot="left" (click)="snav.toggle()">
        <mat-icon>menu</mat-icon>
      </button>
      <h2 slot="title">{{mobileQuery.matches ? 'MobSOS EC' : 'MobSOS Evaluation Center'}}</h2>
    </las2peer-frontend-statusbar>
    <main>
      <router-outlet></router-outlet>
    </main>
  </mat-sidenav-content>
</mat-sidenav-container>
