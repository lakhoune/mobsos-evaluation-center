<span
  *ngIf="error"
  class="loading-placeholder"
  (click)="openErrorDialog()"
>
  <button mat-button>
    <mat-icon>error_outline</mat-icon>
  </button>
</span>
<span *ngIf="serviceNotFoundInMobSOS">
  This service has not generated any data yet. A visualization should
  be shown as soon as you interact with it.
</span>
<div id="value-row">
  <ng-container *ngIf="value$ | async as data; else stillLoading">
    <div *ngIf="value" class="value-visualization">
      {{ value }}
      {{
        measure.visualization.unit ? measure.visualization.unit : ''
      }}
    </div>
    <button *ngIf="value" mat-icon-button [matMenuTriggerFor]="menu">
      <mat-icon> info_outline </mat-icon>
    </button>

    <mat-menu #menu="matMenu" yPosition="above">
      <div id="value-info">
        Showing data fetched on {{ data.fetchDate | date: 'short' }}.
        <p *ngIf="data.error">
          The following error was encountered, while fetching more
          recent data {{ data.error.error }}
        </p>
      </div>
    </mat-menu>
  </ng-container>
</div>
<ng-template #stillLoading class="loading-placeholder">
  <mat-spinner></mat-spinner>
</ng-template>
