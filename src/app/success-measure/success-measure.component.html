<div id="measure-header">
  <button
    mat-icon-button
    *ngIf="editMode$ | async"
    color="warn"
    (click)="onDeleteClicked($event)"
    id="delete-button"
  >
    <mat-icon>remove_circle_outline</mat-icon>
  </button>
  <button
    mat-icon-button
    *ngIf="editMode$ | async"
    color="primary"
    (click)="onEditClicked($event)"
    id="edit-button"
  >
    <mat-icon>edit</mat-icon>
  </button>
  <h4 *ngIf="measure">
    {{ measure.name }}
  </h4>
</div>

<span
  *ngIf="visualizationError || !measure.visualization; else visualizationBlock"
  >{{ visualizationError }}</span
>

<ng-template #visualizationBlock>
  <div *ngIf="measure$ | async as measureAsync">
    <container-element [ngSwitch]="measureAsync.visualization.type">
      <app-chart-visualization
        [measure]="measureAsync"
        [service]="service"
        *ngSwitchCase="'Chart'"
      ></app-chart-visualization>
      <app-kpi-visualization
        [measure]="measureAsync"
        [service]="service"
        *ngSwitchCase="'KPI'"
      ></app-kpi-visualization>
      <app-value-visualization
        [measure]="measureAsync"
        [service]="service"
        *ngSwitchCase="'Value'"
      ></app-value-visualization>
      <div *ngSwitchDefault>
        Unknown chartType: {{ measureAsync.visualization.type }}
      </div>
    </container-element>
  </div>
</ng-template>
<!-- <ng-template appVisualization></ng-template> -->
